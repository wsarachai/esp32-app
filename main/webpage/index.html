<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <script src='jquery-3.3.1.min.js'></script>
    <link rel="stylesheet" href="app.css">
    <script async src="app.js"></script>
    <title>ชื่อโครงการ</title>
</head>
<body>
    <header>
        <h1>ระบบสั่งจ่ายน้ำอัตโนมัติ</h1>
    </header>
   
    <main>
        <section id="DHT22Sensor">
            <div class="flex-container">
                <h2>ข้อมูลทั่วไป</h2>
                <div id="local_time" class="time-data"></div>
            </div>
            <div class="sensor-container">
                <div class="sensor-box temperature">
                    <label>อุณหภูมิ</label>
                    <div id="temperature_reading" class="data"></div>
                </div>
                <div class="sensor-box humidity">
                    <label>ความชื้นในอากาศ</label>
                    <div id="humidity_reading" class="data"></div>
                </div>
                <div class="sensor-box soil-moisture">
                    <label>ความชื้นในดิน</label>
                    <div id="soil_moisture_reading" class="data"></div>
                </div>
            </div>
        </section>
        <hr>

        <section id="WaterConfig">
            <h2>กำหนดค่าของระบบ</h2>
            <label for="min_moiture_level">ความชื้นเปิดวาล์ว (ค่าต่ำสุด): <span id="min_moiture_level_data" class="data"></span></label>
            <input id="min_moiture_level" type="number" maxlength="10" min="0" max="100" value="" placeholder="0-100%">
            <label for="required_moiture_level">ความชื้นปิดวาล์ว (ค่าสูงสุด): <span id="required_moiture_level_data" class="data"></span></label>
            <input id="required_moiture_level" type="number" maxlength="10"  min="0" max="100" value="" placeholder="0-100%">
            <label for="duration">เวลาสูงสุด (หากเกินเวลานี้วาล์วน้ำจะปิดอัตโนมัติ): <span id="duration_data" class="data"></span></label>
            <input id="duration" type="number" maxlength="10" value="" placeholder="จำนวนนาที">
            <button id="save_water_config">บันทึก</button>
        </section>
        <hr>

        <section id="ManualControl">
            <h2>เปิด/ปิด วาล์วน้ำ</h2>
			<div>
				<input id="manual-chk" type="checkbox"><span id="manual-label">กำหนดเอง</span>
			</div>
            <button id="manual_water_btn">เปิดวาล์ว</button>
        </section>
        <hr>

		<section id="EspSSID">
			<h2>ชื่อ WiFi (SSID):</h2>
			<div id="ap_ssid"></div>
		</section>
		<hr>
		
        <section id="WiFiConnect">
            <h2>เชื่อต่อ WiFi</h2>
            <input id="connect_ssid" type="text" maxlength="32" placeholder="SSID" value="">
            <input id="connect_pass" type="password" maxlength="64" placeholder="รหัสผ่าน" value="">
            <label><input type="checkbox" onclick="showPassword()">แสดง Password</label>
            <button id="connect_wifi">เชื่อมต่อ</button>
            <div id="wifi_connect_credentials_errors"></div>
            <h4 id="wifi_connect_status" class="hidden"></h4>
        </section>

        <section id="connect_info" class="hidden">
            <div id="connected_ap_label"></div> <div id="connected_ap" class="data"></div>
            <div id="ip_address_label"></div> <div id="wifi_connect_ip" class="data"></div>
		    <div id="netmask_label"></div> <div id="wifi_connect_netmask" class="data"></div>
		    <div id="gateway_label"></div> <div id="wifi_connect_gw" class="data"></div>
            <button id="disconnect_wifi">Disconnect</button>
        </section>
        <hr>

        <section id="OTA">
            <h2>อัพเดตเฟิร์มแวร์</h2>
            <label id="latest_firmware_label">เฟิร์มแวร์ล่าสุด:</label>
            <div id="latest_firmware"></div>
            <input type="file" id="selected_file" accept=".bin" style="display: none;" onchange="getFileInfo()" />
            <div class="buttons">
                <button onclick="document.getElementById('selected_file').click();">เลือกไฟล์</button>
                <button onclick="updateFirmware()">อัพเดตเฟิร์มแวร์</button>
            </div>
            <h4 id="file_info"></h4>
            <h4 id="ota_update_status"></h4>
        </section>
        <hr>
    </main>
</body>
</html>
